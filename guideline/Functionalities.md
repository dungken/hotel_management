# Hotel Management System Functionalities

This document outlines the **essential** and **extendable** functionalities for the Hotel Management System, derived from the `db.json` file and standard hotel management requirements. Essential functionalities ensure core operations, while extendable functionalities offer opportunities for future enhancements. The system uses a mock server (json-server) running on `http://localhost:3001`.

## Functionalities Table

| STT | Module          | Essential Functionalities                                                                 | Extendable Functionalities                                                                 |
|-----|-----------------|-------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------|
| 1   | Customers       | - **Create Customer**: Add new customer with `name`, `email`, `phone`, `nationality`, `idType`, `idNumber`, `dateOfBirth`, `address`, `customerType`, `loyaltyPoints` (POST `/customers`).<br>- **View Customer List**: Retrieve paginated list with filters (`name`, `email`, `phone`) (GET `/customers?key=value`).<br>- **View Customer Details**: Fetch customer by `id` (GET `/customers/:id`).<br>- **Update Customer**: Replace entire customer record, ensuring unique `email`, `phone`, `idNumber` (PUT `/customers/:id`).<br>- **Partial Update Customer**: Modify specific fields without replacing the entire record (PATCH `/customers/:id`).<br>- **Soft Delete Customer**: Mark as inactive (`status: "INACTIVE"`) (PATCH `/customers/:id`).<br>- **Manage Loyalty Points**: Update `loyaltyPoints` post-booking (PATCH `/customers/:id`).<br>- **Search Customers**: Search by `name`, `email`, `phone`, or `idNumber` (GET `/customers?q=query`). | - **Loyalty Tier Management**: Assign tiers (e.g., Silver, Gold) based on `loyaltyPoints` (add `loyaltyTier` field, PATCH `/customers/:id`).<br>- **Customer Feedback**: Store post-stay feedback (add `feedback` table, POST `/customerFeedback`).<br>- **Bulk Import/Export**: Import/export customer data as CSV (POST `/customers/bulk`, GET `/customers/export`).<br>- **Customer Notifications**: Send booking or promotional emails/SMS (add `notifications` table, POST `/customerNotifications`). |
| 2   | Rooms           | - **Create Room**: Add room with `roomNumber`, `roomTypeId`, `status`, `notes` (POST `/rooms`).<br>- **View Room List**: Retrieve rooms with filters (`roomTypeId`, `status`) (GET `/rooms?key=value`).<br>- **View Room Details**: Fetch room by `roomId` (GET `/rooms/:id`).<br>- **Update Room**: Modify `status`, `notes` (PUT `/rooms/:id`).<br>- **Soft Delete Room**: Mark as inactive (`status: "INACTIVE"`) (PATCH `/rooms/:id`).<br>- **Check Room Availability**: List available rooms for a date range (GET `/rooms?status=AVAILABLE&checkIn=date&checkOut=date`).<br>- **Manage Room Types**: CRUD for `roomTypes` (`name`, `maxAdults`, `basePrice`, etc.) (CRUD `/roomTypes`). | - **Room Maintenance Scheduling**: Track maintenance (add `maintenanceSchedule` table, POST `/roomMaintenance`).<br>- **Room Amenities**: Manage amenities (e.g., Wi-Fi) (add `amenities` table, POST `/roomAmenities`).<br>- **Dynamic Pricing**: Adjust prices based on demand (add `dynamicPricingRules` table, POST `/roomTypes/:id/pricing`).<br>- **Room Photos**: Store/retrieve photos (add `photos` field to `rooms`, GET `/rooms/:id/photos`). |
| 3   | Bookings        | - **Create Booking**: Add booking with `customerId`, `roomId`, `channelId`, `checkInDate`, `checkOutDate`, `adults`, `children`, `totalAmount` (POST `/bookings`).<br>- **View Booking List**: Retrieve bookings with filters (`status`, `customerId`, dates) (GET `/bookings?key=value`).<br>- **View Booking Details**: Fetch booking by `bookingId` (GET `/bookings/:id`).<br>- **Update Booking**: Modify `checkInDate`, `roomId`, etc., ensuring availability (PUT `/bookings/:id`).<br>- **Cancel Booking**: Update to "CANCELLED" with `cancellationReason` (PATCH `/bookings/:id`).<br>- **Approve Booking**: Change `status` to "CONFIRMED" (PATCH `/bookings/:id`).<br>- **Check-In/Check-Out**: Update `status` to "CHECKED_IN" or "COMPLETED" (PATCH `/bookings/:id`). | - **Booking Notifications**: Send confirmation/cancellation emails (add `notifications` table, POST `/bookingNotifications`).<br>- **Group Bookings**: Manage multiple rooms in one booking (add `groupBookings` table, POST `/groupBookings`).<br>- **Overbooking Handling**: Suggest alternatives for conflicts (GET `/bookings/overbooking`).<br>- **Booking History**: Track changes (add `bookingHistory` table, GET `/bookings/:id/history`). |
| 4   | Payments        | - **Create Payment**: Record payment with `bookingId`, `paymentMethodId`, `amount`, `status` (POST `/payments`).<br>- **View Payment List**: Retrieve payments with filters (`bookingId`, `status`) (GET `/payments?key=value`).<br>- **View Payment Details**: Fetch payment by `paymentId` (GET `/payments/:id`).<br>- **Update Payment Status**: Update `status` (e.g., "COMPLETED", "REFUNDED") (PATCH `/payments/:id`).<br>- **Generate VAT Invoice**: Add `isVAT`, `companyName`, `taxNumber` (PATCH `/payments/:id`).<br>- **Process Refunds**: Mark as "REFUNDED" with `notes` (PATCH `/payments/:id`). | - **Partial Payments**: Allow multiple payments per booking (POST `/payments` with partial `amount`).<br>- **Payment Gateway Integration**: Simulate gateways like VNPay (add `gatewayTransactions` table, POST `/payments/gateway`).<br>- **Payment Reconciliation**: Tariff unpaid/overpaid bookings (GET `/payments/reconcile`).<br>- **Multi-Currency Support**: Store conversions (add `currencies` table, POST `/payments/convert`). |
| 5   | Users           | - **User Login/Logout**: Authenticate and issue tokens (POST `/users/login`).<br>- **Create User**: Add user with `username`, `email`, `roles` (POST `/users`).<br>- **View User List**: Retrieve users with filters (`roles`, `email`) (GET `/users?key=value`).<br>- **View User Details**: Fetch user by `id` (GET `/users/:id`).<br>- **Update User**: Modify `email`, `roles` (PUT `/users/:id`).<br>- **Change Password**: Update password (PATCH `/users/:id`).<br>- **Assign Roles**: Update `roles` (PATCH `/users/:id`).<br>- **Soft Delete User**: Mark as inactive (`status: "INACTIVE"`) (PATCH `/users/:id`). | - **Password Reset**: Enable reset via email (POST `/users/resetPassword`).<br>- **User Activity Logs**: Track actions (add `activityLogs` \n- **Role-Based Permissions**: Fine-grained access (add `paths`, POST `/users/:id/permissions`).<br>- **Two-Function Authentication**: Add 2FA (add `2fa` field, POST `/users/:id/2fa`).<br>- **Staff Scheduling**: Manage shifts (add `schedules` table, POST `/userSchedules`). |
| 6   | Dashboard       | - **Revenue Statistics**: Calculate revenue from `payments` (GET `/dashboard/revenue`).<br>- **Customer Statistics**: Count customers from `customers` (GET `/dashboard/customers`).<br>- **Room Occupancy**: Calculate from `bookings` and `rooms` (GET `/dashboard/occupancy`).<br>- **Active Bookings**: Count "PENDING"/"CONFIRMED" bookings (GET `/dashboard/activeBookings`).<br>- **Revenue Chart**: Aggregate `payments` for trends (GET `/dashboard/revenueChart`).<br>- **Room Status Report**: Summarize `rooms.status` (GET `/dashboard/roomStatus`). | - **Customizable Widgets**: Allow user-selected metrics (add `dashboardConfig` table, POST `/dashboard/config`).<br>- **Real-Time Analytics**: Poll for updates (GET `/dashboard/realtime`).<br>- **Advanced Reporting**: Export PDF/Excel (GET `/dashboard/reports/export`).<br>- **Alerts**: Notify low availability (add `alerts` table, GET `/dashboard/alerts`).<br>- **Forecasting**: Predict occupancy/revenue (GET `/dashboard/forecast`). |
| 7   | System-Wide     | - **Search Across Entities**: Global search (GET `/:entity?q=query`).<br>- **Data Validation**: Enforce unique fields and formats (json-server middleware).<br>- **Error Handling**: Clear error messages (customize json-server responses).<br>- **Security**: Basic authentication for protected endpoints (json-server middleware).<br>- **Backup/Restore**: Export/import `db.json` (manual/scripted). | - **Audit Logging**: Log all actions (add `auditLogs` table, POST `/auditLogs`).<br>- **Multi-Language Support**: Store translations (add `translations` table, GET `/translations`).<br>- **Mobile App Integration**: Expose APIs for mobile (reuse existing endpoints).<br>- **External Integrations**: Sync with PMS or Channel Managers (add `integrations` table, POST `/integrations`).<br>- **Caching**: Cache frequent queries (requires backend beyond json-server). |

## Implementation Notes
- **json-server**: Supports CRUD (`GET`, `POST`, `PUT`, `PATCH`, `DELETE`) and filtering (`?key=value`, `?q=query`). Use custom routes/middleware for complex logic (e.g., availability checks).
- **db.json Extensions**: Add tables (`feedback`, `maintenanceSchedule`, `auditLogs`, etc.) or fields (`status` for soft deletes) for extendable features.
- **Security**: Simulate authentication with json-server middleware; replace with real backend for production.
- **Prioritization**: Start with essential functionalities (CRUD, soft deletes, availability checks), then add extendable features like notifications or dynamic pricing based on business needs.